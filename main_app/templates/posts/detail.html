{% extends 'base.html' %}
{% load static %}


{% block title %}
My Post
{% endblock %}

{% block content %}
<div class="container">
<section class="post-detail-container row">
    <div class="current-post-container col s12 m12 l5">
        <h1>{{ post.title }}</h1>
        <h6> By: <a href="{% url 'profile_detail' user.username %}">{{post.user.username}}</a></h6>

        {{ post.description }}
        {{ post.photo }}
        <h2>{{ post.city }}</h2>

        <!-- Edit/Delete Buttons-->
        {% if request.user == post.user %}
        <a class="btn" href="{% url 'edit_post' post.id%}">Edit Post</a>
        <button id="confirm-delete" class="btn">Delete Post</button>
        <form action="{% url 'delete_post' post.id %}" class="hidden delete-form" method="post">
            {% csrf_token %}
            <button type="submit" class="btn">Click to Confirm Deletion</button>
        </form>
        {% endif %}
    </div>

    <article class="comments-container col s12 m12 l5">
        
        <!-- add comment-->
        <button class="add-comment btn">Add Comment</button>
        <form action="" method="POST" class="hidden comment-form">
            {% csrf_token %}
            {{form.as_p}}
            <button type="submit" class="btn">Submit</button>
            <button type= "button" class="btn cancel-comment">Cancel</button>
        </form>



        <!-- comments -->
        <div class='all-comments-cards'>
        <h4>{{comments.count}} comments</h4>
        {% for comment in comments %}
        <a href="{% url 'profile_detail' user.username %}"><h6 class="comment">{{comment.user.username}}</h6></a>
        <p class="comment-content">{{comment.content}}</p>
        {% endfor %}
        </div>
    </article> 
</section>
</div>

{% endblock %}